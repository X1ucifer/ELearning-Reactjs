{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { parseCookies } from 'nookies';\nimport axios from 'axios';\nimport { useToasts } from 'react-toast-notifications';\nimport { useRouter } from 'next/router';\nimport baseUrl from '@/utils/baseUrl';\nimport catchErrors from '@/utils/catchErrors';\nimport PageBanner from '@/components/Common/PageBanner';\nimport Link from '@/utils/ActiveLink';\n\nconst pendingRequests = ({\n  pendingRequests\n}) => {\n  // console.log(pendingRequests)\n  const {\n    addToast\n  } = useToasts();\n  const router = useRouter();\n\n  const approveReq = async id => {\n    try {\n      const url = `${baseUrl}/api/v1/apply/approve-requests`;\n      const payload = {\n        userId: id\n      };\n      const response = await axios.post(url, payload); // console.log(response.data)\n\n      addToast(response.data, {\n        appearance: 'success'\n      });\n      router.push('/admin/pending-requests');\n    } catch (error) {\n      catchErrors(error, setError);\n    }\n  };\n\n  const declineReq = async id => {\n    try {\n      const url = `${baseUrl}/api/v1/apply/decline-requests`;\n      const payload = {\n        userId: id\n      };\n      const response = await axios.post(url, payload); // console.log(response.data)\n\n      addToast(response.data, {\n        appearance: 'success'\n      });\n      router.push('/admin/pending-requests');\n    } catch (error) {\n      catchErrors(error, setError);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsx(PageBanner, {\n      pageTitle: \"Admin Dashboard\",\n      homePageUrl: \"/\",\n      homePageText: \"Home\",\n      activePageText: \"Admin Dashboard\"\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"ptb-100\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-4 col-lg-4\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"td-sidebar\",\n              children: /*#__PURE__*/_jsxs(\"ul\", {\n                children: [/*#__PURE__*/_jsx(\"li\", {\n                  children: /*#__PURE__*/_jsx(Link, {\n                    href: \"/admin/pending-requests\",\n                    activeClassName: \"active\",\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: \"Pending Requests\"\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(\"li\", {\n                  children: /*#__PURE__*/_jsx(Link, {\n                    href: \"#\",\n                    activeClassName: \"active\",\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: \"Dumy Text\"\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(\"li\", {\n                  children: /*#__PURE__*/_jsx(Link, {\n                    href: \"#\",\n                    activeClassName: \"active\",\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: \"Dumy Text\"\n                    })\n                  })\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-8 col-lg-8\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"table-responsive\",\n              children: /*#__PURE__*/_jsxs(\"table\", {\n                className: \"table vertical-align-top\",\n                children: [/*#__PURE__*/_jsx(\"thead\", {\n                  children: /*#__PURE__*/_jsxs(\"tr\", {\n                    children: [/*#__PURE__*/_jsx(\"th\", {\n                      scope: \"col\",\n                      children: \"#\"\n                    }), /*#__PURE__*/_jsx(\"th\", {\n                      scope: \"col\",\n                      children: \"Intructor\"\n                    }), /*#__PURE__*/_jsx(\"th\", {\n                      scope: \"col\",\n                      className: \"text-right\",\n                      children: \"Action\"\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(\"tbody\", {\n                  children: pendingRequests.length ? /*#__PURE__*/_jsx(_Fragment, {\n                    children: pendingRequests.map(request => {\n                      return /*#__PURE__*/_jsxs(\"tr\", {\n                        children: [/*#__PURE__*/_jsx(\"th\", {\n                          scope: \"row\",\n                          children: \"1\"\n                        }), /*#__PURE__*/_jsx(\"td\", {\n                          children: request.name\n                        }), /*#__PURE__*/_jsxs(\"td\", {\n                          className: \"text-right\",\n                          children: [/*#__PURE__*/_jsx(\"button\", {\n                            onClick: e => {\n                              window.confirm(\"Are you sure?\") && approveReq(request.id);\n                            },\n                            className: \"btn btn-success mr-05\",\n                            children: \"Approve\"\n                          }), /*#__PURE__*/_jsx(\"button\", {\n                            onClick: e => {\n                              window.confirm(\"Are you sure?\") && declineReq(request.id);\n                            },\n                            className: \"btn btn-danger\",\n                            children: \"Decline\"\n                          })]\n                        })]\n                      }, request.id);\n                    })\n                  }) : /*#__PURE__*/_jsx(\"tr\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/_jsx(\"td\", {\n                      colSpan: \"3\",\n                      children: \"No Pending Requests!\"\n                    })\n                  })\n                })]\n              })\n            })\n          })]\n        })\n      })\n    })]\n  });\n};\n\npendingRequests.getInitialProps = async ctx => {\n  // console.log(id)\n  const {\n    token\n  } = parseCookies(ctx);\n\n  if (!token) {\n    redirectUser(ctx, '/authentication');\n  }\n\n  const url = `${baseUrl}/api/v1/apply/pending-requests`;\n  const payload = {\n    headers: {\n      Authorization: token\n    }\n  };\n  const response = await axios.get(url, payload); // console.log(response.data)\n\n  return response.data;\n};\n\nexport default pendingRequests;","map":null,"metadata":{},"sourceType":"module"}