{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/AJ/Downloads/Spyberrys/Spyberrys/Spyberrys_app/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/AJ/Downloads/Spyberrys/Spyberrys/Spyberrys_app/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from 'react';\nimport { parseCookies } from 'nookies';\nimport axios from 'axios';\nimport { useToasts } from 'react-toast-notifications';\nimport { useRouter } from 'next/router';\nimport baseUrl from '@/utils/baseUrl';\nimport catchErrors from '@/utils/catchErrors';\nimport PageBanner from '@/components/Common/PageBanner';\nimport Link from '@/utils/ActiveLink';\n\nvar pendingRequests = function pendingRequests(_ref) {\n  var pendingRequests = _ref.pendingRequests;\n\n  // console.log(pendingRequests)\n  var _useToasts = useToasts(),\n      addToast = _useToasts.addToast;\n\n  var router = useRouter();\n\n  var approveReq = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      var url, payload, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              url = \"\".concat(baseUrl, \"/api/v1/apply/approve-requests\");\n              payload = {\n                userId: id\n              };\n              _context.next = 5;\n              return axios.post(url, payload);\n\n            case 5:\n              response = _context.sent;\n              // console.log(response.data)\n              addToast(response.data, {\n                appearance: 'success'\n              });\n              router.push('/admin/pending-requests');\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              catchErrors(_context.t0, setError);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function approveReq(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var declineReq = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var url, payload, response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              url = \"\".concat(baseUrl, \"/api/v1/apply/decline-requests\");\n              payload = {\n                userId: id\n              };\n              _context2.next = 5;\n              return axios.post(url, payload);\n\n            case 5:\n              response = _context2.sent;\n              // console.log(response.data)\n              addToast(response.data, {\n                appearance: 'success'\n              });\n              router.push('/admin/pending-requests');\n              _context2.next = 13;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](0);\n              catchErrors(_context2.t0, setError);\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 10]]);\n    }));\n\n    return function declineReq(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsx(PageBanner, {\n      pageTitle: \"Admin Dashboard\",\n      homePageUrl: \"/\",\n      homePageText: \"Home\",\n      activePageText: \"Admin Dashboard\"\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"ptb-100\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-4 col-lg-4\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"td-sidebar\",\n              children: /*#__PURE__*/_jsxs(\"ul\", {\n                children: [/*#__PURE__*/_jsx(\"li\", {\n                  children: /*#__PURE__*/_jsx(Link, {\n                    href: \"/admin/pending-requests\",\n                    activeClassName: \"active\",\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: \"Pending Requests\"\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(\"li\", {\n                  children: /*#__PURE__*/_jsx(Link, {\n                    href: \"#\",\n                    activeClassName: \"active\",\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: \"Dumy Text\"\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(\"li\", {\n                  children: /*#__PURE__*/_jsx(Link, {\n                    href: \"#\",\n                    activeClassName: \"active\",\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: \"Dumy Text\"\n                    })\n                  })\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-8 col-lg-8\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"table-responsive\",\n              children: /*#__PURE__*/_jsxs(\"table\", {\n                className: \"table vertical-align-top\",\n                children: [/*#__PURE__*/_jsx(\"thead\", {\n                  children: /*#__PURE__*/_jsxs(\"tr\", {\n                    children: [/*#__PURE__*/_jsx(\"th\", {\n                      scope: \"col\",\n                      children: \"#\"\n                    }), /*#__PURE__*/_jsx(\"th\", {\n                      scope: \"col\",\n                      children: \"Intructor\"\n                    }), /*#__PURE__*/_jsx(\"th\", {\n                      scope: \"col\",\n                      className: \"text-right\",\n                      children: \"Action\"\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(\"tbody\", {\n                  children: pendingRequests.length ? /*#__PURE__*/_jsx(_Fragment, {\n                    children: pendingRequests.map(function (request) {\n                      return /*#__PURE__*/_jsxs(\"tr\", {\n                        children: [/*#__PURE__*/_jsx(\"th\", {\n                          scope: \"row\",\n                          children: \"1\"\n                        }), /*#__PURE__*/_jsx(\"td\", {\n                          children: request.name\n                        }), /*#__PURE__*/_jsxs(\"td\", {\n                          className: \"text-right\",\n                          children: [/*#__PURE__*/_jsx(\"button\", {\n                            onClick: function onClick(e) {\n                              window.confirm(\"Are you sure?\") && approveReq(request.id);\n                            },\n                            className: \"btn btn-success mr-05\",\n                            children: \"Approve\"\n                          }), /*#__PURE__*/_jsx(\"button\", {\n                            onClick: function onClick(e) {\n                              window.confirm(\"Are you sure?\") && declineReq(request.id);\n                            },\n                            className: \"btn btn-danger\",\n                            children: \"Decline\"\n                          })]\n                        })]\n                      }, request.id);\n                    })\n                  }) : /*#__PURE__*/_jsx(\"tr\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/_jsx(\"td\", {\n                      colSpan: \"3\",\n                      children: \"No Pending Requests!\"\n                    })\n                  })\n                })]\n              })\n            })\n          })]\n        })\n      })\n    })]\n  });\n};\n\npendingRequests.getInitialProps = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ctx) {\n    var _parseCookies, token, url, payload, response;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            // console.log(id)\n            _parseCookies = parseCookies(ctx), token = _parseCookies.token;\n\n            if (!token) {\n              redirectUser(ctx, '/authentication');\n            }\n\n            url = \"\".concat(baseUrl, \"/api/v1/apply/pending-requests\");\n            payload = {\n              headers: {\n                Authorization: token\n              }\n            };\n            _context3.next = 6;\n            return axios.get(url, payload);\n\n          case 6:\n            response = _context3.sent;\n            return _context3.abrupt(\"return\", response.data);\n\n          case 8:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x3) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nexport default pendingRequests;","map":null,"metadata":{},"sourceType":"module"}