{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport '../public/css/bootstrap.min.css';\nimport '../public/css/animate.min.css';\nimport '../public/css/boxicons.min.css';\nimport '../public/css/meanmenu.min.css';\nimport '../public/css/flaticon.css';\nimport '../node_modules/react-modal-video/css/modal-video.min.css';\nimport 'react-accessible-accordion/dist/fancy-example.css';\nimport 'react-tabs/style/react-tabs.css';\nimport 'react-image-lightbox/style.css';\nimport '../public/css/style.scss';\nimport '../public/css/responsive.css';\nimport '../public/css/courseInnerCard.scss';\nimport Layout from '../components/_App/Layout';\nimport axios from 'axios';\nimport { parseCookies, destroyCookie } from 'nookies';\nimport { redirectUser } from '../utils/auth';\nimport baseUrl from '../utils/baseUrl';\n\nconst MyApp = ({\n  Component,\n  pageProps\n}) => {\n  // console.log(pageProps)\n  return /*#__PURE__*/_jsx(Layout, _objectSpread(_objectSpread({}, pageProps), {}, {\n    children: /*#__PURE__*/_jsx(Component, _objectSpread({}, pageProps))\n  }));\n};\n\nMyApp.getInitialProps = async ({\n  Component,\n  ctx\n}) => {\n  const {\n    token\n  } = parseCookies(ctx);\n  let pageProps = {};\n\n  if (Component.getInitialProps) {\n    pageProps = await Component.getInitialProps(ctx);\n  }\n\n  if (!token) {\n    // if a user not logged in then user can't access those pages\n    const isProtectedRoute = ctx.pathname === '/become-a-teacher' || ctx.pathname === '/my-courses' || ctx.pathname === '/teacher/courses';\n\n    if (isProtectedRoute) {\n      redirectUser(ctx, '/authentication');\n    }\n  } else {\n    // if a user logged in then user can't access those pages\n    const ifLoggedIn = ctx.pathname === '/authentication' || ctx.pathname === '/reset-password';\n\n    if (ifLoggedIn) {\n      redirectUser(ctx, '/');\n    }\n\n    try {\n      const payload = {\n        headers: {\n          Authorization: token\n        }\n      };\n      const url = `${baseUrl}/api/v1/auth/account`;\n      const response = await axios.get(url, payload);\n      const user = response.data; // console.log(user)\n      // If user status disabled then user autometically logged out\n\n      if (!user || !user.active) {\n        destroyCookie(ctx, \"token\");\n      }\n\n      pageProps.user = user;\n    } catch (error) {\n      // console.error(\"Error getting current user\", error);\n      //invalid token\n      // console.log(error)\n      destroyCookie(ctx, \"token\");\n    }\n  } // By returning { props: posts }, the Blog component\n  // will receive `posts` as a prop at build time\n\n\n  return {\n    pageProps\n  };\n};\n\nexport default MyApp;","map":null,"metadata":{},"sourceType":"module"}