{"ast":null,"code":"import Cors from 'cors';\nimport initMiddleware from '@/lib/init-middleware';\nimport { courses as Course, users as User, enroled_courses as Enroled_courses } from '@/models/index'; // Initialize the cors middleware\n\nconst cors = initMiddleware( // You can read more about the available options here: https://github.com/expressjs/cors#configuration-options\nCors({\n  // Only allow requests with GET, POST and OPTIONS\n  methods: ['GET', 'POST', 'OPTIONS']\n}));\nexport default (async (req, res) => {\n  await cors(req, res);\n\n  try {\n    const courses = await Course.findAll({\n      order: [['createdAt', 'DESC']],\n      limit: 3,\n      include: [{\n        model: User,\n        as: 'user',\n        attributes: ['name', 'profilePhoto']\n      }, {\n        model: Enroled_courses,\n        as: 'enroled_courses',\n        attributes: ['courseId']\n      }]\n    });\n    res.send({\n      courses\n    });\n  } catch (error) {\n    console.log(error);\n  }\n});","map":{"version":3,"sources":["C:/Users/AJ/Downloads/Spyberrys/Spyberrys/Spyberrys_app/pages/api/v1/courses/homepage-courses.js"],"names":["Cors","initMiddleware","courses","Course","users","User","enroled_courses","Enroled_courses","cors","methods","req","res","findAll","order","limit","include","model","as","attributes","send","error","console","log"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,SACIC,OAAO,IAAIC,MADf,EAEIC,KAAK,IAAIC,IAFb,EAGIC,eAAe,IAAIC,eAHvB,QAIO,gBAJP,C,CAMA;;AACA,MAAMC,IAAI,GAAGP,cAAc,EACvB;AACAD,IAAI,CAAC;AACD;AACAS,EAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,MAAR,EAAgB,SAAhB;AAFR,CAAD,CAFmB,CAA3B;AAQA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMH,IAAI,CAACE,GAAD,EAAMC,GAAN,CAAV;;AAEA,MAAI;AACA,UAAMT,OAAO,GAAG,MAAMC,MAAM,CAACS,OAAP,CAAe;AACjCC,MAAAA,KAAK,EAAE,CACH,CAAC,WAAD,EAAc,MAAd,CADG,CAD0B;AAIjCC,MAAAA,KAAK,EAAE,CAJ0B;AAKjCC,MAAAA,OAAO,EAAE,CAAC;AACNC,QAAAA,KAAK,EAAEX,IADD;AACOY,QAAAA,EAAE,EAAE,MADX;AAENC,QAAAA,UAAU,EAAE,CAAC,MAAD,EAAS,cAAT;AAFN,OAAD,EAGP;AACEF,QAAAA,KAAK,EAAET,eADT;AAC0BU,QAAAA,EAAE,EAAE,iBAD9B;AAEEC,QAAAA,UAAU,EAAE,CAAC,UAAD;AAFd,OAHO;AALwB,KAAf,CAAtB;AAcAP,IAAAA,GAAG,CAACQ,IAAJ,CAAS;AAACjB,MAAAA;AAAD,KAAT;AACH,GAhBD,CAgBE,OAAOkB,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH;AAEJ,CAvBD","sourcesContent":["import Cors from 'cors'\r\nimport initMiddleware from '@/lib/init-middleware'\r\nimport { \r\n    courses as Course,\r\n    users as User,\r\n    enroled_courses as Enroled_courses\r\n} from '@/models/index'\r\n\r\n// Initialize the cors middleware\r\nconst cors = initMiddleware(\r\n    // You can read more about the available options here: https://github.com/expressjs/cors#configuration-options\r\n    Cors({\r\n        // Only allow requests with GET, POST and OPTIONS\r\n        methods: ['GET', 'POST', 'OPTIONS'],\r\n    })\r\n)\r\n\r\nexport default async (req, res) => {\r\n    await cors(req, res)\r\n\r\n    try {\r\n        const courses = await Course.findAll({\r\n            order: [\r\n                ['createdAt', 'DESC']\r\n            ],\r\n            limit: 3,\r\n            include: [{\r\n                model: User, as: 'user',\r\n                attributes: ['name', 'profilePhoto']\r\n            },{\r\n                model: Enroled_courses, as: 'enroled_courses',\r\n                attributes: ['courseId']\r\n            }],\r\n        })\r\n\r\n        res.send({courses})\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n\r\n}"]},"metadata":{},"sourceType":"module"}