{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/AJ/Downloads/Spyberrys/Spyberrys/Spyberrys_app/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/AJ/Downloads/Spyberrys/Spyberrys/Spyberrys_app/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/AJ/Downloads/Spyberrys/Spyberrys/Spyberrys_app/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"C:/Users/AJ/Downloads/Spyberrys/Spyberrys/Spyberrys_app/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { parseCookies } from 'nookies';\nimport { Spinner, Alert } from 'reactstrap';\nimport axios from 'axios';\nimport { useToasts } from 'react-toast-notifications';\nimport catchErrors from '@/utils/catchErrors';\nimport baseUrl from '@/utils/baseUrl';\n\nvar RegisterForm = function RegisterForm(_ref) {\n  var _jsx2;\n\n  var user = _ref.user;\n\n  var _parseCookies = parseCookies(),\n      token = _parseCookies.token;\n\n  var _useToasts = useToasts(),\n      addToast = _useToasts.addToast;\n\n  var INIT_APPLY = {\n    name: user.name,\n    email: user.email,\n    number: user.phone,\n    subject: \"Becaome A Teacher!\",\n    as_teacher_apply: true,\n    as_teacher_req_desc: ''\n  };\n\n  var _React$useState = React.useState(INIT_APPLY),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      apply = _React$useState2[0],\n      setApply = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      initApply = _React$useState4[0],\n      setInitApply = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      loading = _React$useState6[0],\n      setLoading = _React$useState6[1];\n\n  var _React$useState7 = React.useState(true),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      disabled = _React$useState8[0],\n      setDisabled = _React$useState8[1];\n\n  var _React$useState9 = React.useState(''),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      error = _React$useState10[0],\n      setError = _React$useState10[1];\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.errors;\n\n  React.useEffect(function () {\n    var isApply = Object.values(apply).every(function (el) {\n      return Boolean(el);\n    });\n    isApply ? setDisabled(false) : setDisabled(true);\n  }, [apply]);\n\n  var handleChange = function handleChange(e) {\n    // console.log(d.value)\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setApply(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, name, value));\n    }); // console.log(apply);\n  };\n\n  var handleApply = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var url, payload, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setLoading(true);\n              setError('');\n              url = \"\".concat(baseUrl, \"/api/v1/user/apply\");\n              payload = _objectSpread({}, apply);\n              _context.next = 7;\n              return axios.post(url, payload, {\n                headers: {\n                  Authorization: token\n                }\n              });\n\n            case 7:\n              response = _context.sent;\n              addToast(response.data, {\n                appearance: 'success'\n              });\n              setApply(INIT_APPLY);\n              setInitApply(true);\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](0);\n              catchErrors(_context.t0, setError);\n\n            case 16:\n              _context.prev = 16;\n              setLoading(false);\n              return _context.finish(16);\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 13, 16, 19]]);\n    }));\n\n    return function handleApply() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var isApplied = user && user.as_teacher_apply === true && user.as_teacher_confirmed === null;\n  var isTeacher = user && user.as_teacher_apply === true && user.as_teacher_confirmed === true;\n  var isCancelled = user && user.as_teacher_apply === true && user.as_teacher_confirmed === false;\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: \"teacher-register-area ptb-100\",\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"teacher-register-box\",\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          children: \"Register to Become an Intructor\"\n        }), /*#__PURE__*/_jsx(\"p\", {\n          children: \"Your email address will not be published. Required fields are marked *\"\n        }), isApplied && /*#__PURE__*/_jsx(Alert, {\n          color: \"info mt-15\",\n          children: \"Your application is pending now, you will get notice soon.\"\n        }), isTeacher && /*#__PURE__*/_jsx(Alert, {\n          color: \"success mt-15\",\n          children: \"You already a teacher & create much exciting content.\"\n        }), isCancelled && /*#__PURE__*/_jsx(Alert, {\n          color: \"success mt-15\",\n          children: \"You already applied & you got cancellation.\"\n        }), /*#__PURE__*/_jsx(\"form\", {\n          id: \"contactForm\",\n          onSubmit: handleSubmit(handleApply),\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"col-lg-6 col-md-6\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  type: \"text\",\n                  name: \"name\",\n                  placeholder: \"Your Name\",\n                  value: apply.name,\n                  onChange: handleChange\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-lg-6 col-md-6\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  type: \"text\",\n                  name: \"email\",\n                  placeholder: \"Your email address\",\n                  value: apply.email,\n                  onChange: handleChange\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-lg-12 col-md-6\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  type: \"text\",\n                  name: \"number\",\n                  placeholder: \"Your phone number\",\n                  value: apply.number,\n                  onChange: handleChange\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-lg-12 col-md-12\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  type: \"text\",\n                  name: \"subject\",\n                  placeholder: \"Your Subject\",\n                  value: apply.subject,\n                  onChange: handleChange\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-lg-12 col-md-12\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsx(\"textarea\", (_jsx2 = {\n                  name: \"text\",\n                  cols: \"30\",\n                  rows: \"5\",\n                  placeholder: \"Please tell us about your teaching profession\",\n                  className: \"form-control\"\n                }, _defineProperty(_jsx2, \"name\", \"as_teacher_req_desc\"), _defineProperty(_jsx2, \"value\", apply.as_teacher_req_desc), _defineProperty(_jsx2, \"onChange\", handleChange), _defineProperty(_jsx2, \"ref\", register({\n                  required: true\n                })), _jsx2)), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"invalid-feedback\",\n                  style: {\n                    display: 'block'\n                  },\n                  children: errors.text && 'Details is required.'\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-lg-12 col-sm-12\",\n              children: !(initApply || isApplied || isTeacher || isCancelled) && /*#__PURE__*/_jsx(\"div\", {\n                className: \"text-right\",\n                children: /*#__PURE__*/_jsxs(\"button\", {\n                  disabled: disabled || loading,\n                  type: \"submit\",\n                  className: \"default-btn\",\n                  children: [\"Apply Now\", loading ? /*#__PURE__*/_jsx(Spinner, {\n                    color: \"success\"\n                  }) : '']\n                })\n              })\n            })]\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport default RegisterForm;","map":null,"metadata":{},"sourceType":"module"}