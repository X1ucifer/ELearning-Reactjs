{"ast":null,"code":"import Cors from 'cors';\nimport initMiddleware from '@/lib/init-middleware';\nimport { courses as Course, users as User, videos as Video } from '@/models/index'; // Initialize the cors middleware\n\nconst cors = initMiddleware( // You can read more about the available options here: https://github.com/expressjs/cors#configuration-options\nCors({\n  // Only allow requests with GET, POST and OPTIONS\n  methods: ['GET', 'POST', 'OPTIONS', 'DELETE', 'PUT']\n}));\nexport default (async (req, res) => {\n  await cors(req, res);\n  const {\n    id\n  } = req.query; // console.log(id)\n\n  try {\n    const course = await Course.findOne({\n      where: {\n        id: id\n      },\n      include: [{\n        model: User,\n        as: 'user'\n      }, {\n        model: Video,\n        as: 'videos',\n        attributes: ['name'],\n        order: [['createdAt', 'ASC']]\n      }]\n    }); // console.log(course)\n\n    res.send({\n      course\n    });\n  } catch (error) {\n    // console.log(error)\n    res.send(error.message);\n  }\n});","map":null,"metadata":{},"sourceType":"module"}